# PRD: Telegram Bot Developer

## Overview

**Telegram Bot Developer** is a service that enables natural-language-driven website development and deployment through a Telegram bot. Users send human-style messages describing changes they want on their website, and the system uses Claude (with tools and skills) to implement those changes, commit them to a git repo, deploy, and report back — all autonomously.

## Problem Statement

Making small tweaks to a website (copy changes, styling, adding sections, fixing bugs) requires:
1. Opening an IDE or editor
2. Finding the right files
3. Making changes
4. Committing and pushing
5. Waiting for deployment
6. Verifying the result

This friction discourages quick iterations, especially for non-developers or developers on mobile. A conversational interface removes all of this overhead.

## Solution

A Telegram bot backed by a server that:
1. Receives natural-language messages describing desired changes
2. Translates them into code changes using Claude with tools (file read/write, bash, grep, etc.)
3. Commits changes to the project's git repository
4. Triggers deployment (CI/CD pipeline or direct deploy)
5. Reports completion status back to the user in Telegram

## Target Users

- Solo developers managing personal/small business websites
- Non-technical founders who want to iterate on their site without touching code
- Teams that want a quick "change this" interface for simple tweaks

## User Flow

```
User sends Telegram message
  "Change the hero title to 'Build Faster' and make the CTA button blue"
       |
       v
  Bot acknowledges: "Got it, working on it..."
       |
       v
  Server invokes Claude with project context
  Claude reads relevant files, makes edits, runs build/lint
       |
       v
  Changes committed to git repo (feature branch or main)
       |
       v
  Deployment triggered (push-based CI/CD or direct deploy)
       |
       v
  Bot reports back: "Done! Changes deployed. Here's what I changed: ..."
       |
       v
  (Optional) Webhook from CI/CD confirms successful build
  Bot sends: "Build succeeded, live at https://..."
```

## Core Features

### 1. Telegram Bot Interface
- Receive text messages from authorized users
- Support for multi-message conversations (context within a session)
- Acknowledge receipt immediately, report progress, deliver results
- Support `/status` command to check current task
- Support `/history` command to see recent changes
- Support `/rollback` command to revert last change

### 2. Claude-Powered Code Agent
- Receives the user's request + project context
- Has access to the full project repo (local clone on server)
- Uses Claude tools: file read, file write, edit, bash, grep, glob
- Runs builds/lints/tests to validate changes before committing
- Uses Ralph Loop technique for complex multi-step tasks that need iteration
- Custom Claude skills/plugins for:
  - **Git operations**: commit, branch, push, PR creation
  - **Deploy trigger**: invoke deployment pipeline
  - **Telegram reporter**: send status updates back to chat during work
  - **Build validator**: run build/test and interpret results

### 3. Git Integration
- Server maintains a local clone of the target repository
- Changes are committed with descriptive messages (generated by Claude)
- Branch strategy: configurable (direct to main, or feature branches with auto-merge)
- Push to remote (GitHub/GitLab/Bitbucket)

### 4. Deployment Pipeline
- Trigger deployment after successful push
- Support for common platforms: Vercel, Netlify, Cloudflare Pages, custom CI/CD
- Webhook listener to receive build status callbacks
- Report build success/failure back to Telegram

### 5. Webhook & Notification System
- Receive webhooks from CI/CD platforms on build completion
- Map build events to the originating Telegram conversation
- Send success/failure notifications with relevant details (deploy URL, error logs)

## Architecture

```
+-------------------+        +-------------------+
|   Telegram API    | <----> |   Bot Server      |
|   (Bot Gateway)   |        |   (Node.js/Bun)   |
+-------------------+        +--------+----------+
                                      |
                              +-------v--------+
                              |  Task Queue    |
                              |  (per-user)    |
                              +-------+--------+
                                      |
                              +-------v--------+
                              |  Claude Agent  |
                              |  (with tools)  |
                              +-------+--------+
                                      |
                         +------------+------------+
                         |            |            |
                   +-----v---+  +----v----+  +----v----+
                   | Git Repo|  | Deploy  |  | Webhook |
                   | (local) |  | Trigger |  | Listener|
                   +---------+  +---------+  +---------+
```

## Non-Functional Requirements

- **Security**: Only authorized Telegram users can trigger changes. Bot token and API keys stored securely.
- **Concurrency**: Task queue ensures one change at a time per repo (avoid conflicts).
- **Idempotency**: If the same message is received twice, it should not create duplicate commits.
- **Observability**: Log all requests, Claude interactions, git operations, and deploy events.
- **Resilience**: If Claude fails mid-task, rollback uncommitted changes and notify user.

## Out of Scope (v1)

- Multi-repo management from single bot
- Image/screenshot-based change requests (future: vision-based)
- Approval workflows (all changes auto-deploy in v1)
- Real-time preview before deploy
- Collaborative editing (multiple users editing same repo simultaneously)

## Success Metrics

- Time from message to deployed change < 5 minutes for simple tweaks
- Build success rate > 90% for Claude-generated changes
- User can make 10+ changes per day without touching code

## Development Approach

This project will be developed using the **Ralph Loop technique** — an iterative AI loop where Claude repeatedly receives the same prompt, sees its own previous work, and incrementally improves the implementation until completion. This is well-suited here because:

- The task has clear, well-defined success criteria (bot receives message, makes changes, deploys)
- Each component can be built and tested incrementally
- Claude can validate its own work by running tests and checking build output

Development will proceed in phases, each driven by a Ralph Loop with specific completion promises.
